# Configuration d'exemple pour RAG Multimodal API
# Copiez ce fichier vers .env et remplissez vos valeurs

# =============================================================================
# CONFIGURATION DE BASE
# =============================================================================

# Nom de l'application
APP_NAME="RAG Ultra Performant Multimodal"
APP_VERSION="2005.0.1"
ENVIRONMENT="development"
DEBUG=true
LOG_LEVEL="DEBUG"

# Configuration du serveur
HOST="0.0.0.0"
PORT=8000
MAX_WORKERS=4
WORKER_TIMEOUT=300
KEEP_ALIVE=2

# =============================================================================
# PROVIDERS LLM (OBLIGATOIRE - Remplissez au moins un)
# =============================================================================

# Mistral AI
MISTRAL_API_KEY="your_mistral_api_key_here"
MISTRAL_MODEL="mistral-large-latest"

# OpenAI
OPENAI_API_KEY="your_openai_api_key_here"
OPENAI_MODEL="gpt-4"
OPENAI_EMBEDDING_MODEL="text-embedding-3-large"

# Anthropic Claude
ANTHROPIC_API_KEY="your_anthropic_api_key_here"
ANTHROPIC_MODEL="claude-3-sonnet-20240229"

# Groq
GROQ_API_KEY="your_groq_api_key_here"
GROQ_MODEL="llama3-70b-8192"

# Hugging Face (pour les modèles locaux)
HUGGINGFACE_API_KEY="your_huggingface_token_here"

# =============================================================================
# CONFIGURATION DES SERVICES
# =============================================================================

# Redis
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true

# ChromaDB
CHROMA_HOST="localhost"
CHROMA_PORT=8001
CHROMA_SSL=false
CHROMA_HEADERS="{}"
CHROMA_COLLECTION_NAME="rag_collection"

# ClickHouse (pour ChromaDB en production)
CLICKHOUSE_HOST="localhost"
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER="chroma"
CLICKHOUSE_PASSWORD="chroma_password"
CLICKHOUSE_DATABASE="chroma"

# =============================================================================
# CONFIGURATION DES MODÈLES
# =============================================================================

# Modèles d'embedding
EMBEDDING_MODEL="sentence-transformers/all-mpnet-base-v2"
MULTIMODAL_EMBEDDING_MODEL="sentence-transformers/clip-ViT-B-32-multilingual-v1"

# Modèles multimodaux
CLIP_MODEL="openai/clip-vit-base-patch32"
BLIP_MODEL="Salesforce/blip-image-captioning-base"
BLIP2_MODEL="Salesforce/blip2-opt-2.7b"

# Modèles OCR
OCR_MODEL="microsoft/trocr-base-printed"
TESS_LANG="fra+eng"

# Modèles audio
WHISPER_MODEL="openai/whisper-base"
AUDIO_EMBEDDING_MODEL="facebook/wav2vec2-base"

# =============================================================================
# CONFIGURATION DE PERFORMANCE
# =============================================================================

# Cache
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# Chunking
MAX_CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MIN_CHUNK_SIZE=100

# Recherche
MAX_SEARCH_RESULTS=10
SIMILARITY_THRESHOLD=0.7
HYBRID_SEARCH_ALPHA=0.5

# Traitement des fichiers
MAX_FILE_SIZE=100  # MB
ALLOWED_EXTENSIONS=".txt,.pdf,.docx,.md,.json,.csv,.xlsx,.png,.jpg,.jpeg,.gif,.mp4,.avi,.mp3,.wav"

# Parallélisation
MAX_CONCURRENT_REQUESTS=50
THREAD_POOL_SIZE=10
PROCESS_POOL_SIZE=4

# =============================================================================
# CONFIGURATION MULTIMODALE
# =============================================================================

# Images
MAX_IMAGE_SIZE=10  # MB
IMAGE_QUALITY=85
IMAGE_RESIZE_MAX=1024
SUPPORTED_IMAGE_FORMATS="jpg,jpeg,png,gif,bmp,tiff,webp"

# Vidéos
MAX_VIDEO_SIZE=100  # MB
VIDEO_FRAME_RATE=1  # frames per second
MAX_VIDEO_DURATION=300  # seconds
SUPPORTED_VIDEO_FORMATS="mp4,avi,mov,mkv,webm"

# Audio
MAX_AUDIO_SIZE=50  # MB
AUDIO_SAMPLE_RATE=16000
MAX_AUDIO_DURATION=600  # seconds
SUPPORTED_AUDIO_FORMATS="mp3,wav,flac,ogg,m4a"

# =============================================================================
# CONFIGURATION DE SÉCURITÉ
# =============================================================================

# JWT
JWT_SECRET_KEY="your-super-secret-jwt-key-change-this-in-production"
JWT_ALGORITHM="HS256"
JWT_EXPIRATION=3600  # seconds

# API Keys
API_KEY_HEADER="X-API-Key"
ALLOWED_API_KEYS="api-key-1,api-key-2"

# CORS
CORS_ORIGINS="http://localhost:3000,http://localhost:8080"
CORS_METHODS="GET,POST,PUT,DELETE,OPTIONS"
CORS_HEADERS="*"

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds

# =============================================================================
# CONFIGURATION DU MONITORING
# =============================================================================

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8001
METRICS_PATH="/metrics"

# Logging
LOG_FORMAT="json"
LOG_FILE="logs/app.log"
LOG_MAX_SIZE=100  # MB
LOG_BACKUP_COUNT=5

# Health Checks
HEALTH_CHECK_INTERVAL=30  # seconds
HEALTH_CHECK_TIMEOUT=10  # seconds

# Alerting
ALERT_WEBHOOK_URL=""
ALERT_EMAIL="admin@example.com"
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"

# =============================================================================
# CONFIGURATION DES CHEMINS
# =============================================================================

# Répertoires de données
DATA_DIR="./data"
UPLOAD_DIR="./data/uploads"
CACHE_DIR="./.cache"
LOGS_DIR="./logs"
MODELS_DIR="./models"
TEMP_DIR="./temp"

# Base de données
RAG_DB_PATH="./ultra_rag_db"
VECTOR_DB_PATH="./vector_db"
METADATA_DB_PATH="./metadata.db"

# =============================================================================
# CONFIGURATION DOCKER
# =============================================================================

# Réseau Docker
DOCKER_NETWORK="rag-network"
DOCKER_SUBNET="172.20.0.0/16"

# Volumes
DATA_VOLUME="rag_data"
LOGS_VOLUME="rag_logs"
CACHE_VOLUME="rag_cache"

# =============================================================================
# CONFIGURATION DE DÉVELOPPEMENT
# =============================================================================

# Debug
DEBUG_MODE=true
VERBOSE_LOGGING=true
PROFILING_ENABLED=false

# Tests
TEST_DATABASE_URL="sqlite:///./test.db"
TEST_REDIS_URL="redis://localhost:6380"
TEST_DATA_DIR="./test_data"

# Hot Reload
RELOAD=true
RELOAD_DIRS="app,tests"
RELOAD_INCLUDES="*.py,*.yaml,*.yml,*.json"

# =============================================================================
# CONFIGURATION DE PRODUCTION
# =============================================================================

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH="/etc/ssl/certs/cert.pem"
SSL_KEY_PATH="/etc/ssl/private/key.pem"

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Cron: tous les jours à 2h
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=""
BACKUP_S3_ACCESS_KEY=""
BACKUP_S3_SECRET_KEY=""

# Scaling
AUTO_SCALING_ENABLED=false
MIN_WORKERS=2
MAX_WORKERS=10
CPU_THRESHOLD=80
MEMORY_THRESHOLD=85

# =============================================================================
# VARIABLES D'ENVIRONNEMENT SYSTÈME
# =============================================================================

# Python
PYTHONPATH="./app"
PYTHONUNBUFFERED=1
PYTHONOPTIMIZE=0

# CUDA (pour GPU)
CUDA_VISIBLE_DEVICES="0"
CUDA_DEVICE_ORDER="PCI_BUS_ID"

# Hugging Face
HF_HOME="./.cache/huggingface"
TRANSFORMERS_CACHE="./.cache/transformers"
HF_DATASETS_CACHE="./.cache/datasets"

# Torch
TORCH_HOME="./.cache/torch"

# =============================================================================
# CONFIGURATION AVANCÉE
# =============================================================================

# Expérimental
EXPERIMENTAL_FEATURES=false
BETA_FEATURES=false

# Optimisations
USE_COMPILED_MODELS=false
USE_QUANTIZATION=false
USE_MIXED_PRECISION=false

# Intégrations
LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=""
WANDB_PROJECT=""
WANDB_API_KEY=""

# Custom
CUSTOM_CONFIG_PATH="./config/custom.yaml"
PLUGINS_DIR="./plugins"
EXTENSIONS_ENABLED="ocr,audio,video"